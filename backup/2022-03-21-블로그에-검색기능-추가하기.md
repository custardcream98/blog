---
layout: post
title: Jekyll 블로그에 검색기능 추가하기 1. 컴포넌트 추가
# image:
#   path: /assets/img/blog/jeremy-bishop@0,5x.jpg
description: >
  블로그에 검색 기능을 추가하려고 합니다.
hide_description: true
category: devlog
tags: [jekyll, Github, Github Pages, Blogs, JavaScript]
hide_last_modified: true
---

JavaScript, HTML, CSS 공부 겸 블로그 내 검색 기능을 개발하고 있습니다.
{:.lead}

1. toc
{:toc}

# SearchBar Branch

`SearchBar Branch`를 생성해서 블로그에 검색 기능을 추가하려고 합니다. 완성해낸다면 공부가 정말 많이 될 것 같은 주제입니다.

# 검색 버튼 및 검색창 추가
~~~html
<!--file: "_includes/body/menu.html"-->
<button id="_search" class="nav-btn no-hover">
    <label class="sr-only" for="_search-input">Search</label>
    <span class="icon-search"></span>
</button>
<div id="_search-box">
    <div class="nav-btn"><span class="icon-search"></span></div>
    <form id="_search-input-box">
        <input
          id="_search-input"
          type="search"
          class="nav-btn"
          placeholder="Type something…"
        />
        <button id="reset-btn" type="reset" class="nav-btn no-hover">
          <span class="sr-only">Close</span> <span class="icon-cross"></span>
        </button>
    </form>
</div>
~~~

우선 `menu.html`에 search 버튼과 search box를 추가했습니다. Hydejack에서 기본으로 `icon-search`, `icon-cross` class를 가지고 있어서 해당 클래스를 사용하면 돋보기, X 아이콘은 잘 나왔습니다. `reset-btn`은 `reset` type을 부여해서 버튼이 눌릴 때마다 form으로 묶여있는 input 태그를 리셋하도록 했습니다.

참고로 `sr-only` 클래스는 부트스트랩 기반에서 사용하는 것으로, 숨기고 싶은 태그 요소에 사용합니다. 보통 웹 접근성을 위해 사용한다고 하는데, 저는 주석처럼 사용해봤습니다.

~~~css
/*file: "_sass/my_style.scss"*/
#_search-box {
    position: absolute;
    display: flex;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    transform: translateY(-9999px);
    background-color: var(--main-background-color);
}

#_search-box.show {
    transform: none;
}

.hide {
    display: none;
}

#_search-input-box {
    display: flex;
}
~~~

`#_search-box`는 클릭 전에는 `transform: translateY(-9999px);`로 치워뒀다가, 클릭 후 `.show` 클래스를 부여해서 나타나게 하는 방식으로 구현했습니다. 다크모드 On Off를 담당하는 스위치인 `.onoff-switch`의 position이 absolute여서 Search Bar 위로 overlay돼는 문제가 발생해, `.hide` 클래스를 추가해 검색 버튼이 눌리면 스위치를 가렸습니다.

~~~javascript
// file: "assets/searchBox.js
const SEARCH_BTN_ID = "_search";
const SEARCH_BOX_ID = "_search-box";
const SHOW_BOX_CLASS = "show";
const RESET_BTN_ID = "reset-btn";
const HIDE_CLASS = "hide";
const ONOFF_SWITCH_CLASS = ".onoff-switch";

const searchBtn = document.getElementById(SEARCH_BTN_ID);
searchBtn.addEventListener("click", searchBox);

const resetBtn = document.getElementById(RESET_BTN_ID);
resetBtn.addEventListener("click", searchBoxHide);

function searchBox(event) {
    const searchBox = document.getElementById(SEARCH_BOX_ID);
    const darkModeBtn = document.querySelector(ONOFF_SWITCH_CLASS);

    if (!searchBox.classList.contains(SHOW_BOX_CLASS)) {
        searchBox.classList.add(SHOW_BOX_CLASS);
        darkModeBtn.classList.add(HIDE_CLASS);
    }
}

function searchBoxHide(event) {
    const searchBox = document.getElementById(SEARCH_BOX_ID);
    const darkModeBtn = document.querySelector(ONOFF_SWITCH_CLASS);

    if (searchBox.classList.contains(SHOW_BOX_CLASS)) {
        searchBox.classList.remove(SHOW_BOX_CLASS);
        darkModeBtn.classList.remove(HIDE_CLASS);
    }
}
~~~

검색 버튼을 누르면 검색창이 나오고, X버튼을 누르면 사라지는 단순한 코드입니다.

오늘 구현된 부분까지의 작동 모습입니다.

![search-btn-made](/assets/img/devlog/search-btn-made.gif){:style="display:block; margin:auto;" width="90%"}

# 내일 해야할 일
* Search Bar의 Width를 조정합니다.
* 검색어를 입력했을 때 검색 내용을 Display하는 html을 추가합니다.
* 검색 기능을 어떻게 구현할지 Reference를 찾아봐야 합니다.


